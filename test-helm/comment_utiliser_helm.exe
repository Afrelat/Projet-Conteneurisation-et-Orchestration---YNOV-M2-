ğŸ“¦ DÃ©ploiement du projet avec Helm & Kubernetes

Ce projet utilise Helm pour dÃ©ployer lâ€™ensemble de lâ€™architecture Kubernetes (APIs, bases de donnÃ©es, web, messaging, monitoring).

âš ï¸ Toutes les commandes Helm doivent Ãªtre lancÃ©es depuis le dossier test-helm/.

ğŸ§° PrÃ©requis
Outils obligatoires sur la machine

Git

Kubectl

Helm v3+

Un cluster Kubernetes actif (Docker Desktop, Minikube, AKSâ€¦)

VÃ©rification rapide
kubectl version --client
helm version
kubectl get nodes


ğŸ‘‰ Si kubectl get nodes rÃ©pond â†’ le cluster est prÃªt.

ğŸ“ Structure du projet (IMPORTANT)
Projet-Conteneurisation-et-Orchestration---YNOV-M2-/
â”‚
â”œâ”€â”€ test-helm/            ğŸ‘ˆ TOUJOURS se placer ici
â”‚   â”œâ”€â”€ Chart.yaml
â”‚   â”œâ”€â”€ values.yaml       ğŸ‘ˆ Configuration centrale
â”‚   â”œâ”€â”€ templates/
â”‚   â””â”€â”€ README.md
â”‚
â””â”€â”€ autres dossiers (Ã  ignorer pour Helm)


âŒ Ne jamais lancer Helm depuis la racine du dÃ©pÃ´t
âœ… Toujours Ãªtre dans test-helm/

ğŸ“‚ Se placer au bon endroit
cd Projet-Conteneurisation-et-Orchestration---YNOV-M2-/test-helm


VÃ©rification :

ls


Tu dois voir :

Chart.yaml
values.yaml
templates/

ğŸš€ DÃ©ploiement pas Ã  pas
1ï¸âƒ£ VÃ©rifier le chart Helm
helm lint .


RÃ©sultat attendu :

1 chart(s) linted, 0 chart(s) failed


ğŸ‘‰ Si Ã§a Ã©choue â†’ ne pas continuer

2ï¸âƒ£ GÃ©nÃ©rer les manifests (TEST LOCAL â€“ recommandÃ©)
helm template k8s . -n projet-apps > rendered.yaml


ğŸ“Œ Ce que Ã§a fait :

GÃ©nÃ¨re tous les YAML Kubernetes

Nâ€™applique rien au cluster

Permet de vÃ©rifier les erreurs avant dÃ©ploiement

3ï¸âƒ£ VÃ©rifications rapides (optionnel mais conseillÃ©)
Select-String -Path rendered.yaml -Pattern "<no value>"


ğŸ‘‰ Sâ€™il nâ€™y a aucun rÃ©sultat, les templates sont OK.

4ï¸âƒ£ DÃ©ployer sur le cluster Kubernetes
helm upgrade --install k8s . \
  --namespace projet-apps \
  --create-namespace


ğŸ“Œ Explication :

Ã‰lÃ©ment	RÃ´le
k8s	Nom du release Helm
.	Chart courant
projet-apps	Namespace applicatif
--create-namespace	CrÃ©e le namespace si besoin
ğŸ” VÃ©rifications aprÃ¨s dÃ©ploiement
Voir les pods
kubectl get pods -n projet-apps
kubectl get pods -n ns-data
kubectl get pods -n ns-monitoring


Tous les pods doivent finir en Running.

Voir les services
kubectl get svc -A

Voir les dÃ©ploiements
kubectl get deploy -n projet-apps

ğŸŒ AccÃ¨s Ã  lâ€™application Web

Si lâ€™ingress est activÃ© (values.yaml) :

kubectl get ingress -n projet-apps


Puis :

ouvrir un navigateur

accÃ©der Ã  :

http://localhost


(ou le host configurÃ© dans values.yaml)

ğŸ”„ Mettre Ã  jour le projet

AprÃ¨s une modification de :

values.yaml

ou dâ€™un fichier dans templates/

Relancer :

helm upgrade k8s . -n projet-apps


ğŸ‘‰ Kubernetes met Ã  jour sans tout redÃ©ployer

ğŸ§¹ Supprimer le projet
helm uninstall k8s -n projet-apps


Optionnel (nettoyage complet) :

kubectl delete namespace projet-apps
kubectl delete namespace ns-data
kubectl delete namespace ns-monitoring

ğŸ§  RÃ¨gles IMPORTANTES Ã  respecter
âœ… Ã€ faire

Modifier values.yaml

Lancer Helm depuis test-helm/

Utiliser helm lint avant chaque dÃ©ploiement

âŒ Ã€ ne pas faire

âŒ Modifier rendered.yaml

âŒ Modifier les YAML gÃ©nÃ©rÃ©s Ã  la main

âŒ Lancer Helm depuis la racine du repo

ğŸ†˜ DÃ©pannage rapide
Voir les logs dâ€™un pod
kubectl logs <pod-name> -n <namespace>

DÃ©crire un pod
kubectl describe pod <pod-name> -n <namespace>

âœ… Conclusion

Un seul chart Helm

Une seule commande pour dÃ©ployer

Configuration centralisÃ©e

Compatible local & cloud
